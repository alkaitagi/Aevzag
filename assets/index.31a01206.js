import{c as e,a as t,r as a,w as o,t as n,l as s,s as r,b as i,d as l,e as c,f as u,u as p,g as d,h as m,o as h,i as f,j as v,k as _,m as g,n as y,p as E,v as b,q as w}from"./vendor.c8bf7c27.js";let k;!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const o=new URL(e,location),n=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const r=new URL(e,o);if(self[t].moduleMap[r])return a(self[t].moduleMap[r]);const i=new Blob([`import * as m from '${r}';`,`${t}.moduleMap['${r}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){s(new Error(`Failed to import: ${e}`)),n(l)},onload(){a(self[t].moduleMap[r]),n(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/assets/");const j={},O=function(e,t){if(!t)return e();if(void 0===k){const e=document.createElement("link").relList;k=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in j)return;j[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":k,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))},L=[{path:"phonology",name:"phonology",icon:"audiotrack",component:()=>O((()=>__import__("./index.20732836.js")),["/assets/index.20732836.js","/assets/index.19ea6d5c.css","/assets/vendor.c8bf7c27.js","/assets/types.a423ec07.js","/assets/types.c828ff55.css","/assets/TableEntry.6c130267.js","/assets/TableEntry.28ab263e.css","/assets/Flag.66603a1f.js","/assets/Flag.57192830.css","/assets/Seeker.7110ab0c.js","/assets/Seeker.e7e6ce0a.css","/assets/index.cbab1530.js","/assets/audio-player.d4821415.js"])},{path:"converter",name:"converter",icon:"sync_alt",component:()=>O((()=>__import__("./index.3e69ef43.js")),["/assets/index.3e69ef43.js","/assets/index.e1b1f002.css","/assets/Flag.66603a1f.js","/assets/Flag.57192830.css","/assets/vendor.c8bf7c27.js","/assets/file-manager.9a2fdd9a.js"])},{path:"phrasebook",name:"phrasebook",icon:"chat",component:()=>O((()=>__import__("./index.0f48279e.js")),["/assets/index.0f48279e.js","/assets/index.09de23dd.css","/assets/types.a423ec07.js","/assets/types.c828ff55.css","/assets/vendor.c8bf7c27.js","/assets/Flag.66603a1f.js","/assets/Flag.57192830.css","/assets/Seeker.7110ab0c.js","/assets/Seeker.e7e6ce0a.css","/assets/index.cbab1530.js","/assets/index.4762e9dd.js","/assets/index.0ef8c241.css","/assets/audio-player.d4821415.js"])},{path:"dictionary",name:"dictionary",icon:"book",component:()=>O((()=>__import__("./index.9dc3ebed.js")),["/assets/index.9dc3ebed.js","/assets/index.8f68c5d5.css","/assets/Seeker.7110ab0c.js","/assets/Seeker.e7e6ce0a.css","/assets/vendor.c8bf7c27.js","/assets/Flag.66603a1f.js","/assets/Flag.57192830.css","/assets/index.cbab1530.js","/assets/search.f060bdbd.js"])}],R=[{path:"phonology",title:"Phonology",name:"phonologyEditor",component:()=>O((()=>__import__("./Editor.653eec75.js")),["/assets/Editor.653eec75.js","/assets/Editor.9c3fef38.css","/assets/EditorCard.8a34556f.js","/assets/EditorCard.84fe7593.css","/assets/editor.24a7d04b.js","/assets/vendor.c8bf7c27.js","/assets/file-manager.9a2fdd9a.js","/assets/NotesEditor.2bff4760.js","/assets/TableEntry.6c130267.js","/assets/TableEntry.28ab263e.css"])},{path:"converter",title:"Converter",name:"converterEditor",component:()=>O((()=>__import__("./Editor.a68a51d9.js")),["/assets/Editor.a68a51d9.js","/assets/Editor.7e321a3a.css","/assets/EditorCard.8a34556f.js","/assets/EditorCard.84fe7593.css","/assets/editor.24a7d04b.js","/assets/vendor.c8bf7c27.js","/assets/file-manager.9a2fdd9a.js"])},{path:"phrasebook",title:"Phrasebook",name:"phrasebookEditor",component:()=>O((()=>__import__("./Editor.ecbd8410.js")),["/assets/Editor.ecbd8410.js","/assets/Editor.6c2a920a.css","/assets/NotesEditor.2bff4760.js","/assets/EditorCard.8a34556f.js","/assets/EditorCard.84fe7593.css","/assets/editor.24a7d04b.js","/assets/vendor.c8bf7c27.js","/assets/file-manager.9a2fdd9a.js","/assets/index.4762e9dd.js","/assets/index.0ef8c241.css","/assets/index.cbab1530.js","/assets/Editor.4f3bc877.js","/assets/Editor.b37d8f6a.css"])},{path:"phrasebookÐ¡orpus",title:"Phrasebook Corpus",name:"phrasebookCorpusEditor",component:()=>O((()=>__import__("./CorpusEditor.86d54b99.js")),["/assets/CorpusEditor.86d54b99.js","/assets/CorpusEditor.0268b338.css","/assets/EditorCard.8a34556f.js","/assets/EditorCard.84fe7593.css","/assets/editor.24a7d04b.js","/assets/vendor.c8bf7c27.js","/assets/file-manager.9a2fdd9a.js","/assets/Editor.4f3bc877.js","/assets/Editor.b37d8f6a.css","/assets/index.4762e9dd.js","/assets/index.0ef8c241.css","/assets/index.cbab1530.js"])},{path:"dictionary",title:"Dictionary",name:"dictionaryEditor",component:()=>O((()=>__import__("./Editor.fb3e11f1.js")),["/assets/Editor.fb3e11f1.js","/assets/Editor.754352ad.css","/assets/editor.24a7d04b.js","/assets/vendor.c8bf7c27.js","/assets/file-manager.9a2fdd9a.js","/assets/Seeker.7110ab0c.js","/assets/Seeker.e7e6ce0a.css","/assets/EditorCard.8a34556f.js","/assets/EditorCard.84fe7593.css","/assets/NotesEditor.2bff4760.js","/assets/search.f060bdbd.js"])}],I=[{path:"/home",name:"home",component:()=>O((()=>__import__("./index.eddcc153.js")),["/assets/index.eddcc153.js","/assets/index.bc0f7e7b.css","/assets/types.a423ec07.js","/assets/types.c828ff55.css","/assets/vendor.c8bf7c27.js","/assets/Flag.66603a1f.js","/assets/Flag.57192830.css"])},{path:"/",component:()=>O((()=>__import__("./Navigation.b255d409.js")),["/assets/Navigation.b255d409.js","/assets/Navigation.a06d9b94.css","/assets/vendor.c8bf7c27.js"]),children:L},{path:"/editor/",component:()=>O((()=>__import__("./EditorNavigation.5034ac72.js")),["/assets/EditorNavigation.5034ac72.js","/assets/EditorNavigation.86783a6b.css","/assets/editor.24a7d04b.js","/assets/vendor.c8bf7c27.js","/assets/file-manager.9a2fdd9a.js"]),children:R},{path:"/:pathMatch(.*)",redirect:{name:"home"}}];var P=e({history:t(),routes:I});async function V(e,t,a,o){}async function x(e){return 0}class A{constructor(e,t="cache",s){this.storage=e,this.records=a({}),e.getItem(t).then((a=>{a&&(this.records.value=a),o(this.records,(()=>e.setItem(t,n(this.records.value))),{deep:!0}),null==s||s()}))}clean(){this.records.value={}}add(e){return!this.records.value[e]&&!!this.update(e)}delete(e){delete this.records.value[e]}update(e){return this.records.value[e]=Date.now()}updateOf(e){var t;return null!=(t=this.records.value[e])?t:0}}const D=a([]),T="https://raw.githubusercontent.com/alkaitagi/avzag/store/",C=s.createInstance({name:"user"}),S=new A(C,"cache",(()=>C.getItem("lects").then((e=>D.value=null!=e?e:["Kaitag"])).then((()=>U(!0)))));async function U(e=!1){const t=Object.entries(S.records.value).filter((([e])=>!e.includes("/")||D.value.some((t=>e.startsWith(t))))),a=[];for(const[o,n]of t){const e=await x();Date.now()-3e5>e&&e>n&&a.push(o)}a.length&&(console.log("cleaning outdated cache",a),e&&Object.keys(S.records.value).length&&window.alert("New data is available, reloading..."),null==a||a.forEach((e=>S.delete(e))),location.reload())}async function M(e,t){if(e.endsWith(".json")||(e+=".json"),!S.add(e))return await C.getItem(e);console.log("cached",e);const a=await fetch(T+e,{cache:"no-store"}).then((e=>e.json())).then((e=>e)).catch((()=>t));return await C.setItem(e,a),a}async function $(e){const t={};for(const a of D.value){const o=await M(a+"/"+e);o&&(t[a]=o)}return t}let B;const N=r([]),W=r(),q=a([]);function z(e){let t="";for(const{ipa:a,tags:o}of B.primary)if(e.includes(a)){t+=o;break}for(const{ipa:a,tags:o}of B.secondary)e.includes(a)&&(t+=" "+o);return t}function F(e){let t="",a=0;return" "===e.charAt(0)&&(t=" ",a=1),t+e.charAt(a).toUpperCase()+e.slice(a+1)}function K(e,t){e=" "+e.replace(/\n/g,"\n ").trim();let a="";for(let o=0;o<e.length;){let n=!1;for(const[s,r]of t){if(!s||!r)continue;const t=s.length,i=e.substring(o,o+t),l=[[s,r],[F(s),F(r)],[s.toUpperCase(),r.toUpperCase()]];for(const[e,s]of l)if(i===e){n=!0,a+=s,o+=t;break}if(n)break}n||(a+=e[o],o++)}return a.replace(/\n /g,"\n").trim()}o(D,(async()=>{N.value.length=0,q.value.length=0,B=await M("ipa");const e=await $("phonology");q.value=Object.keys(e),function(e){const t={};for(const a in e){const o=e[a];o&&o.forEach((e=>{const o=e.phoneme;o in t||(t[o]={ipa:o,tags:z(o),lects:{}}),t[o].lects[a]=e}))}N.value=Object.values(t),N.value.sort((({ipa:e},{ipa:t})=>e>t?1:t>e?-1:0)),W.value=N.value[0]}(e)}));const G=r({});o(D,(async()=>{G.value={},G.value=await $("converter")}));const H=r();o(G,(e=>{e&&(H.value=Object.values(e)[0])}));const J=i({});o(H,(e=>{e&&(J.initial=e.mappings[0],J.final=e.mappings[1],X.initial="")}));const Q=l((()=>{var e,t,a,o;return{initial:null!=(t=null==(e=J.initial)?void 0:e.pairs)?t:[],final:null!=(o=null==(a=J.final)?void 0:a.pairs.map((([e,t])=>[t,e])))?o:[]}}));o((()=>Q.value.initial),((e,t)=>{X.initial=K(K(X.initial,t),e.map((([e,t])=>[t,e])))}));const X=i({initial:"",final:l((()=>K(K(X.initial,Q.value.initial),Q.value.final)))}),Y=r([]),Z=r({}),ee=r(),te=r(),ae=a([]);function oe(e){return e.flatMap((e=>e.map((e=>e.text.plain.replaceAll("*","")))))}o(D,(async()=>{Y.value=[],Z.value={},Y.value=await M("phrasebookCorpus",[]),Z.value=await $("phrasebook"),function(){if(!Z.value)return;const e=Object.values(Z.value);ae.value=Y.value.map((({phrases:t})=>t.map((({id:t,name:a,blocks:o})=>[a,...oe(o),...e.flatMap((e=>{var a,o;return oe(null!=(o=null==(a=e[t])?void 0:a.blocks)?o:[])}))].join(" ").toLowerCase()))))}(),ee.value=Y.value[0],te.value=ee.value.phrases[0]}));const ne=r({lists:[]}),se=r({});o(D,(async()=>{se.value={},se.value=await $("dictionary"),ne.value=await M("dictionaryMeta")}));var re=c({setup(){const e=p(),t=d();e.name&&"home"!==e.name||t.push(localStorage.url&&localStorage.url!==e.path?{path:localStorage.url}:{name:"home"}),u((()=>{const t=e.name;t&&(localStorage.url=e.path,["phonology","converter","phrasebook","dictionary"].includes(t)&&(localStorage.urlUser=e.path))}))}});re.render=function(e,t,a,o,n,s){const r=f("router-view");return h(),m(r)};var ie=c({props:{icon:{type:String,default:""},text:{type:String,default:""},isOn:Boolean}});const le={key:0,class:"icon"},ce={key:1};ie.render=function(e,t,a,o,n,s){return h(),m("button",{class:{highlight:e.isOn}},[e.icon?(h(),m("p",le,v(e.icon),1)):_("",!0),e.text?(h(),m("p",ce,v(e.text),1)):_("",!0),g(e.$slots,"default")],2)};var ue=c({props:{modelValue:Boolean,icon:{type:String,default:""},text:{type:String,default:""}},emits:["update:modelValue"],setup:(e,{emit:t,attrs:a})=>({toggle:function(){t("update:modelValue",!e.modelValue)},attrs:a})});ue.render=function(e,t,a,o,n,s){const r=ie;return h(),m("div",{onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t))},[g(e.$slots,"default",{on:e.modelValue},(()=>[y(r,E({style:{width:"100%"}},e.attrs,{icon:e.icon,text:e.text,"is-on":e.modelValue}),null,16,["icon","text","is-on"])]))])},function(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:o}=e;let n;"serviceWorker"in navigator&&(n=new b("/sw.js",{scope:"/"}),n.addEventListener("activated",(e=>{e.isUpdate?window.location.reload():null==o||o()})),n.register({immediate:t}).then((e=>e)))}();const pe=w(re);pe.component("Btn",ie),pe.component("Toggle",ue),pe.use(P),P.isReady().then((()=>pe.mount("#app")));export{A as S,ue as _,U as a,M as b,S as c,ie as d,R as e,N as f,W as g,q as h,G as i,H as j,Q as k,D as l,J as m,K as n,te as o,V as p,ee as q,T as r,C as s,X as t,L as u,Y as v,ae as w,Z as x,se as y,ne as z};
