import{d as e,S as a,c as t,p as l,b as n}from"./index.31a01206.js";import{e as s,o as u,h as i,l as o,d as v,r,w as c,t as f}from"./vendor.c8bf7c27.js";import{u as d,d as m}from"./file-manager.9a2fdd9a.js";var p=s({props:{message:{type:String,default:"Delete?"},icon:{type:String,default:"delete"},text:{type:String,default:""}},emits:["confirm"],setup:(e,{emit:a})=>({confirm:function(){window.confirm(e.message)&&a("confirm")}})});p.render=function(a,t,l,n,s,o){const v=e;return u(),i(v,{class:{"highlight-font-alert":"delete"===a.icon},icon:a.icon,text:a.text,onClick:a.confirm},null,8,["class","icon","text","onClick"])};const g=o.createInstance({name:"editor"}),w=new a(g),S=v((()=>w.updateOf(h.value))),y=v((()=>O.value&&S.value&&S.value<t.updateOf(h.value))),O=r();c(O,(()=>g.setItem("lect",f(O.value)).then((()=>k()))));const x=r();let I;const h=v((()=>{let e=N.value.filename+".json";return N.value.global||(e=(f(O.value)||"_")+"/"+e),e}));function J(){g.setItem(h.value,f(x.value)),w.update(h.value)}const N=r({default:void 0,filename:""});async function b(e){var a;null==I||I(),I=void 0,x.value=void 0,N.value=e,void 0===O.value?O.value=null!=(a=await g.getItem("lect"))?a:"":await k()}function j(){l(JSON.stringify(x.value,null,2),h.value,window.prompt("Enter optional comment:",h.value))}async function k(e=!0){let a;null==I||I(),I=void 0,console.log("resetting",h.value),e&&(a=await g.getItem(h.value))?(x.value=a,await n(h.value)):((a=await n(h.value))?x.value=a:x.value=JSON.parse(JSON.stringify(N.value.default)),w.delete(h.value),await g.removeItem(h.value)),I||(I=c(x,J,{deep:!0}))}function C(){d((e=>x.value=JSON.parse(e)))}function _(){m(JSON.stringify(x.value,null,2),h.value)}export{p as _,y as a,b,N as c,_ as d,x as f,S as i,O as l,j as p,k as r,g as s,C as u};
